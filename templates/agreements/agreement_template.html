<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Room Agreement – {{ listing.title }}</title>

<style>
/* -------- PAGE FORMATTING -------- */
@page {
    size: A4;
    margin: 30mm 18mm;
}

body {
    font-family: "Helvetica", Arial, sans-serif;
    color: #1f2937;
    font-size: 12px;
    line-height: 1.45;
}

/* -------- HEADER -------- */
.header {
    width: 100%;
    border-bottom: 3px solid #0ea5a4;
    padding-bottom: 10px;
    margin-bottom: 20px;
}

.logo-box {
    background: #0ea5a4;
    color: white;
    width: 60px;
    height: 60px;
    text-align: center;
    line-height: 60px;
    border-radius: 8px;
    font-size: 22px;
    font-weight: bold;
    float:left;
}

.header-text {
    margin-left: 80px;
}

.header-title {
    font-size: 20px;
    font-weight: bold;
}

.header-sub {
    font-size: 12px;
    color: #6b7280;
}

.right-header {
    float: right;
    text-align: right;
    font-size: 12px;
    margin-top: -50px;
}

/* -------- SECTION TITLE -------- */
.section-title {
    font-size: 15px;
    color: #0b7285;
    margin: 16px 0 6px;
    font-weight: bold;
}

/* -------- TABLES -------- */
.table-box {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}

.table-box td {
    border: 1px solid #d1d5db;
    padding: 8px;
}

.table-label {
    background: #f3f4f6;
    font-weight: bold;
    width: 160px;
}

/* -------- PROFILE CARDS -------- */
.card {
    border: 1px solid #e5e7eb;
    padding: 10px;
    border-radius: 6px;
    margin-top: 12px;
    background: #ffffff;
}

.card-title {
    font-size: 13px;
    color: #0b7285;
    font-weight: bold;
    margin-bottom: 4px;
}

.small {
    font-size: 11px;
    color: #4b5563;
}

/* -------- DOCUMENT IMAGE -------- */
.doc-img {
    width: 140px;
    height: 100px;
    object-fit: cover;
    border: 1px solid #d1d5db;
    border-radius: 4px;
}

/* -------- SIGNATURE AREA -------- */
.signature-block {
    margin-top: 40px;
}

.sign-line {
    width: 60%;
    border-bottom: 2px solid #111827;
    margin: 35px 0 5px;
}

/* -------- FOOTER -------- */
.footer {
    margin-top: 30px;
    font-size: 11px;
    text-align: center;
    color: #6b7280;
    border-top: 1px dashed #dbeafe;
    padding-top: 8px;
}
</style>

</head>
<body>

<!-- HEADER -->
<div class="header">
    <div class="logo-box">RF</div>

    <div class="header-text">
        <div class="header-title">Roommate Finder</div>
        <div class="header-sub">Residential Tenancy Agreement</div>
    </div>

    <div class="right-header">
        <div><b>Agreement #:</b> AGR-{{ agreement.id }}</div>
        <div><b>Date:</b> {{ agreement.created_at|date:"d M Y" }}</div>
    </div>
</div>

<!-- MAIN TITLE -->
<h2 style="text-align:center; color:#0b7285; margin-top:5px;">TENANCY / ROOM AGREEMENT</h2>
<p style="text-align:center; font-size:11px; color:#475569;">
    This agreement outlines the terms between the Owner and the Tenant for the listed property.
</p>

<!-- LISTING SUMMARY -->
<h3 class="section-title">Listing Summary</h3>

<table class="table-box">
<tr>
    <td class="table-label">Listing</td>
    <td>{{ listing.title }}</td>
    <td class="table-label">Address</td>
    <td>{{ listing.address }}</td>
</tr>
<tr>
    <td class="table-label">Rent (Monthly)</td>
    <td>₹ {{ agreement.rent }}</td>
    <td class="table-label">Deposit</td>
    <td>₹ {{ agreement.deposit }}</td>
</tr>
<tr>
    <td class="table-label">Agreement Period</td>
    <td>{{ agreement.start_date }} → {{ agreement.end_date }}</td>
    <td class="table-label">Occupancy Allowed</td>
    <td>{{ listing.occupants_allowed|default:"1" }}</td>
</tr>
</table>

<!-- OWNER / TENANT DETAILS -->
<h3 class="section-title">Parties Involved</h3>

<table class="table-box">
<tr>
<td width="50%">
    <div class="card">
        <div class="card-title">Owner / Landlord</div>
        <b>{{ listing.owner.full_name }}</b><br>
        <div class="small">Email: {{ listing.owner.email }}</div>
        <div class="small">Phone: {{ listing.owner.phone }}</div>

        <div class="small" style="margin-top:8px;"><b>ID Document:</b></div>
        {% if listing.owner.profile_photo %}
            <img class="doc-img" src="{{ listing.owner.profile_photo.url }}">
        {% else %}
            <img class="doc-img" src="/static/default-id.png">
        {% endif %}
    </div>
</td>

<td width="50%">
    <div class="card">
        <div class="card-title">Tenant</div>
        <b>{{ agreement.tenant.full_name }}</b><br>
        <div class="small">Email: {{ agreement.tenant.email }}</div>
        <div class="small">Phone: {{ agreement.tenant.phone }}</div>

        <div class="small" style="margin-top:8px;"><b>ID Document:</b></div>
        {% if agreement.tenant.profile_photo %}
            <img class="doc-img" src="{{ agreement.tenant.profile_photo.url }}">
        {% else %}
            <img class="doc-img" src="/static/default-id.png">
        {% endif %}
    </div>
</td>
</tr>
</table>

<!-- AMENITIES -->
<h3 class="section-title">Amenities</h3>
<table class="table-box">
<tr><td>
{% if listing.amenities %}
    {% for a in listing.amenities %}
        • {{ a|title }}<br>
    {% endfor %}
{% else %}
    No amenities added.
{% endif %}
</td></tr>
</table>

<!-- TERMS -->
<h3 class="section-title">Agreement Clauses</h3>

{% for line in agreement.clauses.splitlines %}
<p style="margin-bottom:6px; text-align:justify;">{{ line }}</p>
{% endfor %}

<p style="margin-top:10px;">This agreement is governed by the laws of India.</p>

<!-- SIGNATURES -->
<div class="signature-block">
    <table class="table-box">
    <tr>
        <td>
            <b>Owner Signature</b><br><br>
            <div class="sign-line"></div>
            {{ listing.owner.full_name }}
        </td>

        <td>
            <b>Tenant Signature</b><br><br>
            <div class="sign-line"></div>
            {{ agreement.tenant.full_name }}
        </td>
    </tr>
    </table>
</div>

<!-- FOOTER -->
<div class="footer">
    This document was generated by Roommate Finder — Please keep a copy for your records.
</div>

</body>
</html>
